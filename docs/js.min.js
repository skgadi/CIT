function getNumFromText(e){var t;try{return t=math.evaluate(e),math.isNumeric(t)?t:NaN}catch(e){return NaN}}function updateMathJax(){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}var lang={en:{name:"English",appName:"CIT",appFName:"Control and Identification Toolbox",algorithms:{sResponse:{name:"System response",documentation:"ol-system.pdf",plots:{u:"Input to the system, $u(t)$",y:"System output, $y(t)$"},fGens:{u:{name:"Input to the system, $u(t)$"}},inputs:{in:"System output, $y(t)$"},outputs:{out:"System input, $u(t)$"}},pid:{name:"PID controller",documentation:"pid.pdf",params:{"k-p":{name:"Proportional constant, $K_P$",dValue:10,min:-1/0,max:1/0},"k-i":{name:"Integral constant, $K_I$",dValue:1,min:-1/0,max:1/0},"k-d":{name:"Derivative constant, $K_D$",dValue:0,min:-1/0,max:1/0}},plots:{r:"Reference, $r(t)$",y:"System output, $y(t)$",e:"Error, $e(t)$",u:"Control signal, $u(t)$"},fGens:{u:{name:"Reference, $r(t)$"}},inputs:{in:"System output, $y(t)$"},outputs:{out:"Control signal, $u(t)$"}}},mTabs:{mModel:"Mathematical model",bridgeDevice:"Bridge device configuration",params:"Simulation parameters",fGens:"Function generator(s)",graphs:"Graphs",errors:"Errors"},bridge:{iTypeName:"Input type",iTypes:{analog:"Analog voltage",encoder:"Encoder",temp:"Temperature sensor",humidity:"Humidity sensor",current:"Aanalog current",light:"Light sensor"},oTypeName:"Output type",oTypes:{dc0:"Pulsed DC voltage out Ch00",dc1:"Pulsed DC voltage out Ch01",ac0:"Pulsed AC voltage out Ch00",ac1:"Pulsed AC voltage out Ch01"}},offset:"Offset",gain:"Gain",aSelection:"Algorithm selection",noParams:"Parameters are unavailable for the selected algorithm.",fGens:{params:{amp:{name:"Amplitude",val:1,min:0,max:1/0},freq:{name:"Frequency",val:1,min:0,max:1/0},duty:{name:"Duty  cycle",val:50,min:0,max:100},phase:{name:"Phase",val:0,min:-360,max:360},offset:{name:"Offset",val:0,min:-1/0,max:1/0},start:{name:"Start at",val:0,min:0,max:1/0}},iSignal:"Invert signal",sTypes:{step:{name:"Step function",params:["amp","offset"]},sine:{name:"Sine wave",params:["amp","freq","phase","offset"]},triangle:{name:"Triangular wave",params:["amp","freq","phase","offset"]},sawtooth:{name:"Sawtooth wave",params:["amp","freq","phase","offset"]},rect:{name:"Rectangular wave",params:["amp","freq","phase","duty","offset"]}},sType:"Signal type"},errors:{uENFound:"No error found in the data entered by user.",uEFound:"Error: following values entered by the user are wrong.",sec:"Section",sSec:"Subsection",uVal:"Value entered",min:"Minimum",max:"Maximum"},plots:{show:"Show in graph",nWind:"Open in new window",sLog:"Download the log",sComplex:"Plot the complex numbers"}},es:{name:"Español",appName:"CIT",appFName:"Caja de herramientas de control e identificación",algorithms:{sResponse:{name:"Respuesta del sistema",documentation:"ol-system.pdf",plots:{u:"Entrada al sistema, $u(t)$",y:"Salida del sistema, $y(t)$"},fGens:{u:{name:"Entrada al sistema, $u(t)$"}},inputs:{in:"Salida del sistema, $y(t)$"},outputs:{out:"Entrada del sistema, $u(t)$"}},pid:{name:"Controlador PID",documentation:"pid.pdf",params:{"k-p":{name:"Constante proporcional, $K_P$",dValue:10,min:-1/0,max:1/0},"k-i":{name:"Constante integral, $K_I$",dValue:1,min:-1/0,max:1/0},"k-d":{name:"Constante derivada, $K_D$",dValue:0,min:-1/0,max:1/0}},plots:{r:"Referencia, $r(t)$",y:"Salida del sistema, $y(t)$",e:"Error, $e(t)$",u:"Siñal de control, $u(t)$"},fGens:{u:{name:"Referencia, $r(t)$"}},inputs:{in:"Salida del sistema, $y(t)$"},outputs:{out:"Siñal de control, $u(t)$"}}},mTabs:{mModel:"Modelo matemático",bridgeDevice:"Configuración del dispositivo puente",params:"Parámetros de simulación",fGens:"Generador(es) de funciones",graphs:"Gráficos",errors:"Errores"},bridge:{iTypeName:"Tipo de entrada",iTypes:{analog:"Voltaje análogo",encoder:"Codificador",temp:"Sensor de temperatura",humidity:"Sensor de humedad",current:"Aanalog actual",light:"Sensor de luz"},oTypeName:"Tipo de salida",oTypes:{dc0:"Saluda de tensión DC pulsada Ch00",dc1:"Saluda de tensión DC pulsada Ch01",ac0:"Saluda de tensión AC pulsada Ch00",ac1:"Saluda de tensión AC pulsada Ch01"}},offset:"Offset",gain:"Ganancia",aSelection:"Selección de algoritmo",noParams:"Los parámetros no están disponibles para el algoritmo seleccionado.",fGens:{params:{amp:{name:"Amplitude",val:1,min:0,max:1/0},freq:{name:"Frequency",val:1,min:0,max:1/0},duty:{name:"Duty  cycle",val:50,min:0,max:100},phase:{name:"Fase",val:0,min:-360,max:360},offset:{name:"Offset",val:0,min:-1/0,max:1/0},start:{name:"Start at",val:0,min:0,max:1/0}},iSignal:"Invert signal",sTypes:{step:{name:"Step function",params:["amp","offset"]},sine:{name:"Sine wave",params:["amp","freq","phase","offset"]},triangle:{name:"Triangular wave",params:["amp","freq","phase","offset"]},sawtooth:{name:"Sawtooth wave",params:["amp","freq","phase","offset"]},rect:{name:"Rectangular wave",params:["amp","freq","phase","duty","offset"]}},sType:"Signal type"},errors:{uENFound:"No se encontraron errores en los datos ingresados por el usuario.",uEFound:"Error: los siguientes valores ingresados por el usuario son incorrectos.",sec:"Sección",sSec:"Subsección",uVal:"Valor ingresado",min:"Mínimo",max:"Máximo"},plots:{show:"Mostrar en gráfico",nWind:"Abrir en nueva ventana",sLog:"Descargar el registro",sComplex:"Graficar los números complejos"}}};String.prototype.replaceAll_1=function(e,t){var a=this;return a.replace(new RegExp(e,"g"),t)},String.prototype.replaceAll_2=function(e,t){var a=this;return a.split(e).join(t)};var app=new Vue({el:"#app",data:{lang:lang,sLang:"en",sAlgorithm:"",display:{mModel:!1,bridgeDevice:!1,params:!1,fGens:!1,graphs:!1,errors:!1},sInputs:{},iGains:{},iOffsets:{},sOutputs:{},oGains:{},oOffsets:{},params:{},fGens:{},errors:[],defaults:{sInputs:"analog",iGains:1,iOffsets:0,sOutputs:"dc0",oGains:1,oOffsets:0},dFGen:{sType:"step",params:{},iSignal:!1}},watch:{sAlgorithm:{deep:!0,handler:function(){this.validateInputs()}},sLang:function(){},oGains:{deep:!0,handler:function(){this.validateInputs()}},oOffsets:{deep:!0,handler:function(){this.validateInputs()}},iGains:{deep:!0,handler:function(){this.validateInputs()}},iOffsets:{deep:!0,handler:function(){this.validateInputs()}},params:{deep:!0,handler:function(){this.validateInputs()}},fGens:{deep:!0,handler:function(){this.validateInputs()}}},beforeMount:function(){this.$set(this,"sAlgorithm","sResponse")},mounted:function(){document.getElementById("loading").style.display="none",document.getElementById("app").style.display="block"},updated:function(){this.resetInvalidsToDefault(),updateMathJax()},computed:{cLang:function(){return this.lang[this.sLang]},mModel:function(){return`<iframe src='https://docs.google.com/gview?url=https://cit.skgadi.com/m-models/${this.cLang.algorithms[this.sAlgorithm].documentation}&embedded=true' style='width:100%; height:300px;' frameborder='0'></iframe>`}},methods:{addToFGens:function(e,t){this.fGens[e].splice(t,0,JSON.parse(JSON.stringify(this.dFGen))),this.$nextTick(this.validateInputs)},delAFGen:function(e,t){this.fGens[e].splice(t,1),this.$nextTick(this.validateInputs)},clearErrors:function(){this.$set(this,"errors",[])},validateInputs:function(){this.clearErrors();for(var e=document.getElementsByClassName("errValidation"),t=0;t<e.length;t++){var a,s,n,i=e[t],r=!1;a=getNumFromText(i.value),s=math.evaluate(i.getAttribute("min")),n=math.evaluate(i.getAttribute("max")),isNaN(a)?r=!0:math.abs(a)===1/0?r=!0:NaN!==s&&a<s?r=!0:NaN!==n&&a>n&&(r=!0),r?(this.errors.push({mTab:i.getAttribute("mTab"),sID:i.getAttribute("sID"),val:i.value,min:"$"+math.parse(s).toTex().replaceAll_1("Infinity","\\infty")+"$",max:"$"+math.parse(n).toTex().replaceAll_1("Infinity","\\infty")+"$"}),i.classList.add("w3-red")):i.classList.remove("w3-red")}},resetInvalidsToDefault:function(){for(var e=Object.keys(this.cLang.algorithms[this.sAlgorithm].inputs),t=["sInputs","iOffsets","iGains"],a=0;a<e.length;a++)for(var s=e[a],n=0;n<t.length;n++){var i=t[n];if(void 0===this[i][s])return this.$set(this[i],s,this.defaults[i]),void this.$nextTick(this.validateInputs)}e=Object.keys(this.cLang.algorithms[this.sAlgorithm].outputs),t=["sOutputs","oOffsets","oGains"];for(a=0;a<e.length;a++)for(s=e[a],n=0;n<t.length;n++){i=t[n];if(void 0===this[i][s])return this.$set(this[i],s,this.defaults[i]),void this.$nextTick(this.validateInputs)}if(this.cLang.algorithms[this.sAlgorithm].params){e=Object.keys(this.cLang.algorithms[this.sAlgorithm].params);for(a=0;a<e.length;a++){s=e[a];if(void 0===this.params[s])return this.$set(this.params,s,this.cLang.algorithms[this.sAlgorithm].params[s].dValue),void this.$nextTick(this.validateInputs)}}if(this.cLang.algorithms[this.sAlgorithm].fGens){e=Object.keys(this.cLang.algorithms[this.sAlgorithm].fGens);for(a=0;a<e.length;a++){s=e[a];if(void 0===this.fGens[s]||0===this.fGens[s].length)return this.$set(this.fGens,s,[Object.assign({},this.dFGen)]),void this.$nextTick(this.validateInputs);for(var r=0;r<this.fGens[s].length;r++){var o=this.fGens[s][r].sType;for(n=0;n<this.cLang.fGens.sTypes[o].params.length;n++){var l=this.cLang.fGens.sTypes[o].params[n];if(void 0===this.fGens[s][r].params[l])return this.$set(this.fGens[s][r].params,l,Object.assign({},this.cLang.fGens.params[l])),void this.$nextTick(this.validateInputs)}var m=Object.keys(this.fGens[s][r].params);for(n=0;n<m.length;n++)if(this.cLang.fGens.sTypes[o].params.indexOf(m[n])<0)return this.$delete(this.fGens[s][r].params,m[n]),void this.$nextTick(this.validateInputs)}}}}}});MathJax.Hub.Config({showMathMenu:!1,messageStyle:"none",menuSettings:{inTabOrder:!1},extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{preview:"none",inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}});